<?xml version="1.0"?>
<config_machines version="2.0">
   <machine MACH="lanlmac">
      <!-- customize these fields as appropriate for your system (max tasks) and
           desired layout (change '${HOME}/projects' to your
           prefered location). -->
      <DESC>Containerized E3SM-ELM</DESC>
      <NODENAME_REGEX>pn2293611.lanl.gov</NODENAME_REGEX>
      <OS>LINUX</OS>
      <COMPILERS>gnu</COMPILERS>
      <MPILIBS>openmpi,mpi-serial</MPILIBS>
      <PROJECT>docker_runs</PROJECT>
      <CIME_OUTPUT_ROOT>/Users/$USER/projects/e3sm/output</CIME_OUTPUT_ROOT>
      <DIN_LOC_ROOT>/Users/$USER/projects/e3sm/inputdata</DIN_LOC_ROOT>
      <DIN_LOC_ROOT_CLMFORC>/Users/$USER/projects/e3sm/inputdata/atm/datm7</DIN_LOC_ROOT_CLMFORC>
      <DOUT_S_ROOT>$CIME_OUTPUT_ROOT/archive/$CASE</DOUT_S_ROOT>
      <BASELINE_ROOT>/Users/$USER/projects/e3sm/baselines</BASELINE_ROOT>
      <CCSM_CPRNC>/Users/$USER/projects/e3sm/tools/cprnc</CCSM_CPRNC>
      <GMAKE>make</GMAKE>
      <!-- May want to modify this. Will require users to have 8 CPUs avail-->
      <GMAKE_J>8</GMAKE_J>
      <BATCH_SYSTEM>none</BATCH_SYSTEM>
      <SUPPORTED_BY>rfiorella at lanl dot gov</SUPPORTED_BY>
      <!-- May want to modify this. Will require users to have 8 CPUs avail-->
      <MAX_TASKS_PER_NODE>8</MAX_TASKS_PER_NODE>
      <MAX_MPITASKS_PER_NODE>8</MAX_MPITASKS_PER_NODE>
      <PROJECT_REQUIRED>FALSE</PROJECT_REQUIRED>
      <!-- Do we really want to force serial here? -->
      <mpirun mpilib="mpi-serial">
	      <executable></executable>
      </mpirun>
      <mpirun mpilib="default">
	      <executable>mpirun</executable>
	      <arguments>
	            <arg name="num_tasks"> -np {{ total_tasks }}</arg>
	      </arguments>
      </mpirun>
      <module_system type="none"/>
      <environment_variables>
        <env name="HDF5_HOME">/opt/homebrew/</env>
        <env name="NETCDF_PATH">/opt/homebrew/</env>
        <env name="NETCDF_C_PATH">/opt/homebrew/</env>
        <env name="NETCDF_FORTRAN_PATH">/opt/homebrew/</env>
      </environment_variables>
   </machine>
</config_machines>
